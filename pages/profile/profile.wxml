<!-- pages/profile/profile.wxml -->
<view class="profile-page">
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="user-info" bindtap="onUserInfoTap">
    <view class="avatar-container">
      <text class="avatar" wx:if="{{!userInfo.avatarUrl}}">
        {{isLogin || isGuest ? 'ğŸ‘¤' : 'ğŸ”’'}}
      </text>
      <image src="{{userInfo.avatarUrl}}" class="avatar-image" wx:else></image>
    </view>
    <view class="user-detail">
      <text class="username">{{userInfo.nickName}}</text>
      <view class="user-meta">
        <text class="user-level" wx:if="{{isLogin || isGuest}}">
          ç¥è¯å­¦è€… Lv.{{userInfo.level}}
        </text>
        <text class="login-tip" wx:else>ç‚¹å‡»ç™»å½•æŸ¥çœ‹æ›´å¤šåŠŸèƒ½</text>
      </view>
      <text class="login-time" wx:if="{{loginTime}}">ä¸Šæ¬¡ç™»å½•: {{loginTime}}</text>
      
      <!-- æ˜¾ç¤ºæ‰‹æœºå·ï¼Œä½¿ç”¨catchtapé˜²æ­¢äº‹ä»¶å†’æ³¡ -->
      <view class="phone-info" wx:if="{{userInfo.phone}}" catchtap="onPhoneTap">
        <text class="phone-icon">ğŸ“±</text>
        <text class="phone-text">{{userInfo.phone}}</text>
        <text class="phone-verified" wx:if="{{userInfo.phoneVerified}}">âœ“</text>
      </view>
    </view>
    <text class="login-arrow" wx:if="{{!isLogin && !isGuest}}">â€º</text>
  </view>

  <!-- å­¦ä¹ ç»Ÿè®¡ -->
  <view class="stats-section" wx:if="{{isLogin || isGuest}}">
    <view class="stats-item" bindtap="onCollections">
      <text class="stats-number">{{stats.collections}}</text>
      <text class="stats-label">æ”¶è—</text>
    </view>
    <view class="stats-item" bindtap="onHistory">
      <text class="stats-number">{{stats.history}}</text>
      <text class="stats-label">é˜…è¯»</text>
    </view>
    <view class="stats-item" bindtap="onNotes">
      <text class="stats-number">{{stats.notes}}</text>
      <text class="stats-label">ç¬”è®°</text>
    </view>
  </view>

  <!-- åŠŸèƒ½åˆ—è¡¨ -->
  <view class="function-list" wx:if="{{isLogin || isGuest}}">
    <view class="func-item" bindtap="onCollections">
      <text class="func-icon">â­</text>
      <text class="func-name">æˆ‘çš„æ”¶è—</text>
      <text class="func-arrow">></text>
    </view>
    
    <view class="func-item" bindtap="onHistory">
      <text class="func-icon">ğŸ“š</text>
      <text class="func-name">æµè§ˆå†å²</text>
      <text class="func-arrow">></text>
    </view>
    
    <view class="func-item" bindtap="onNotes">
      <text class="func-icon">ğŸ“</text>
      <text class="func-name">æˆ‘çš„ç¬”è®°</text>
      <text class="func-arrow">></text>
    </view>
  </view>

  <!-- è®¾ç½® -->
  <view class="settings-section">
    <view class="section-title">è®¾ç½®</view>
    <view class="setting-item" bindtap="onThemeChange">
      <text class="setting-name">ä¸»é¢˜æ¨¡å¼</text>
      <switch checked="{{isDarkMode}}" bindchange="onThemeChange" color="#3cc51f"></switch>
    </view>
    <view class="setting-item" bindtap="onFontSize">
      <text class="setting-name">å­—ä½“å¤§å°</text>
      <text class="setting-value">{{fontSize}}px ></text>
    </view>
    <view class="setting-item" bindtap="onClearCache">
      <text class="setting-name">æ¸…é™¤ç¼“å­˜</text>
      <text class="setting-value">{{cacheSize}}MB ></text>
    </view>
    <view class="setting-item" bindtap="onFeedback">
      <text class="setting-name">æ„è§åé¦ˆ</text>
      <text class="setting-value">></text>
    </view>
    <view class="setting-item" bindtap="onAbout">
      <text class="setting-name">å…³äºæˆ‘ä»¬</text>
      <text class="setting-value">></text>
    </view>
  </view>

  <!-- é€€å‡ºæŒ‰é’® -->
  <button class="logout-btn" bindtap="onLogout" wx:if="{{isLogin || isGuest}}">
    {{isGuest ? 'é€€å‡ºæ¸¸å®¢æ¨¡å¼' : 'é€€å‡ºç™»å½•'}}
  </button>
</view>