<view class="page-container">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  (æ”¹ä¸ºæ™®é€šå¸ƒå±€) -->
    <view class="navbar">
        <view class="navbar-left">
            <view class="location">
                <text class="location-icon">ğŸ’„</text>
                <text class="location-text">å¥ç¾èè‹±</text>
            </view>
            <view class="current-date">{{currentDate}}</view>
        </view>
        <view class="navbar-right">
            <view class="notification-icon" bindtap="navigateToNotifications">
                <text>ä½ å¥½,{{userInfo.nickName}}</text>
            </view>
            <image class="user-avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}"
                bindtap="navigateToMyPage"></image>
        </view>
    </view>

    <!-- è½®æ’­å›¾åŒºåŸŸ -->
    <view class="swiper-container">
        <swiper class="swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="3000" duration="500">
            <swiper-item wx:for="{{banners}}" wx:key="index">
                <view class="swiper-item" style="background: linear-gradient(135deg, {{item.bgColor}});"
                    bindtap="navigateToBanner" data-url="{{item.url}}">
                    <view class="swiper-content">
                        <text class="swiper-title">{{item.title}}</text>
                        <text class="swiper-desc">{{item.description}}</text>
                        <view class="swiper-button">æŸ¥çœ‹è¯¦æƒ…</view>
                    </view>
                    <image class="swiper-image" src="{{item.image}}" mode="aspectFit"></image>
                </view>
            </swiper-item>
        </swiper>
    </view>

    <!-- ä»Šæ—¥é¢„çº¦ -->
    <view class="today-appointments card">
        <view class="section-header flex-between">
            <view class="section-title">ä»Šæ—¥é¢„çº¦</view>
            <view class="view-all" bindtap="viewAllAppointments">æŸ¥çœ‹å…¨éƒ¨ ></view>
        </view>
        <view wx:if="{{todayAppointments.length > 0}}">
            <view class="appointment-item" wx:for="{{todayAppointments}}" wx:key="index">
                <view class="appointment-left">
                    <view class="time-badge">
                        <text class="time-hour">{{item.yysj}}</text>
                        <!-- <text class="time-period">{{item.yysj}}</text> -->
                    </view>
                    <view class="appointment-divider" wx:if="{{!item.last}}"></view>
                </view>
                <view class="appointment-right">
                    <view class="customer-info">
                        <text class="customer-name">{{item.jmkhb.khxm}}</text>
                        <text class="customer-phone">ğŸ“± {{item.jmkhb.khsjh}}</text>
                    </view>
                    <view class="service-info">
                        <text class="service">{{item.jmfwb.fwmc}}</text>
                        <view class="status-badge {{item.zt=='å¾…æœåŠ¡'?'pending':
                        (item.zt=='æœåŠ¡ä¸­'?'confirmed':
                        (item.zt=='å·²æœåŠ¡'?'completed':
                        (item.zt=='å·²è¶…æ—¶'?'timeout':'cancelled')))}}">
                            {{item.zt}}
                        </view>
                    </view>
                    <view class="staff-info" wx:if="{{item.jmygb}}">
                        <text class="staff-label">æœåŠ¡äººå‘˜:</text>
                        <text class="staff-name">{{item.jmygb.nickname}}</text>
                    </view>
                </view>
            </view>
        </view>
        <view wx:else class="empty-state">
            <view class="empty-icon">ğŸ“…</view>
            <text class="empty-text">ä»Šæ—¥æš‚æ— é¢„çº¦</text>
        </view>
    </view>

    <!-- ç»Ÿè®¡æ•°æ® -->
    <view class="stats-grid card">
        <view class="stat-item" bindtap="navigateToTodayCustomers">
            <view class="stat-icon">ğŸ‘¥</view>
            <view class="stat-content">
                <text class="stat-number">{{todayCustomers}}</text>
                <text class="stat-label">ä»Šæ—¥å®¢æˆ·</text>
            </view>
        </view>
        <view class="stat-item" bindtap="navigateToPerformance">
            <view class="stat-icon">ğŸ’°</view>
            <view class="stat-content">
                <text class="stat-number">{{monthlyRevenue}}</text>
                <text class="stat-label">æœ¬æœˆä¸šç»©(ä¸‡)</text>
            </view>
        </view>
        <view class="stat-item" bindtap="navigateToInventory">
            <view class="stat-icon">âš ï¸</view>
            <view class="stat-content">
                <text class="stat-number">{{inventoryAlert}}</text>
                <text class="stat-label">åº“å­˜é¢„è­¦</text>
            </view>
        </view>
        <view class="stat-item" bindtap="navigateToAttendance">
            <view class="stat-icon">ğŸ“Š</view>
            <view class="stat-content">
                <text class="stat-number">{{attendanceRate}}%</text>
                <text class="stat-label">å‡ºå‹¤ç‡</text>
            </view>
        </view>
    </view>

    <!-- å¿«æ·æ“ä½œ (ç§»åˆ°åº•éƒ¨) -->
    <view class="quick-actions card">
        <view class="section-title">å¿«æ·æ“ä½œ</view>
        <view class="actions-grid">

            <view class="action-item" bindtap="navigateToReservation">
                <view class="action-icon appointment">
                    <text>ğŸ“</text>
                </view>
                <text class="action-text">é¢„çº¦ç®¡ç†</text>
            </view>
            <view class="action-item" bindtap="navigateToSchedule">
                <view class="action-icon schedule">
                    <text>ğŸ“…</text>
                </view>
                <text class="action-text">æˆ‘çš„æ’ç­</text>
            </view>
            <view class="action-item" bindtap="navigateToInventory">
                <view class="action-icon inventory">
                    <text>ğŸ“¦</text>
                </view>
                <text class="action-text">åº“å­˜ç®¡ç†</text>
            </view>
            <view class="action-item" bindtap="navigateToService">
                <view class="action-icon reports">
                    <text>ğŸ§¼</text>
                </view>
                <text class="action-text">æœåŠ¡ç®¡ç†</text>
            </view>
            <view class="action-item" bindtap="navigateToCustomer">
                <view class="action-icon customer">
                    <text>ğŸ‘¥</text>
                </view>
                <text class="action-text">å®¢æˆ·ç®¡ç†</text>
            </view>
            <view class="action-item" bindtap="navigateToStaff">
                <view class="action-icon staff">
                    <text>ğŸ‘©â€ğŸ’¼</text>
                </view>
                <text class="action-text">å‘˜å·¥ç®¡ç†</text>
            </view>
            
        </view>
    </view>

    <!-- åº•éƒ¨æç¤º -->
    <view class="bottom-tips">
        <text class="tip-text">å½“å‰ç‰ˆæœ¬ v1.0.0 â€¢ å®¢æœçƒ­çº¿: 18915755120</text>
    </view>

</view>